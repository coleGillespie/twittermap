
// Static Mode
// -------------------------------------------------- //

var fs = require("fs");

module.exports.install = function(server) {
  
  var Backbone = require("backbone");
  
  server.Model = Backbone.Model;
  server.Collection = Backbone.Collection;

  // Load in the fake database
  try {
    server.db = JSON.parse(fs.readFileSync(process.cwd() + "/database.json", "utf-8"));
  } catch (x) {
    server.db = {};
  }

  // Create a save method
  // -------------------------------------------------- //
  
  server.Collection.prototype.save = function(key, callback) {
    server.db[key] = this.toJSON();
    fs.writeFile(process.cwd() + "/database.json", JSON.stringify(server.db), callback);
  };
  
  // Create a load method
  // -------------------------------------------------- //
  server.Collection.prototype.load = function(key, callback) {
    var raw = fs.readFile(process.cwd() + "/database.json");

    
  };

}

