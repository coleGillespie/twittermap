# Telegraph

Telegraph attempts to streamline Node.js development. It combines [Express](https://github.com/visionmedia/express)
with [Socket.IO](https://github.com/LearnBoost/socket.io) to help with building responsive, realtime interfaces
and utilizes document databases (currently `CouchDB`) for storage.

**Get started:**

```
npm install telegraph -g
telegraph init
```

---

``` javascript
// Current defaults for Telegraph
module.exports = App = new Telegraph.Server({
     'appname'        : "Telegraph",   // For aesthetic purposes, the name of the application
     'websockets'     : true,          // Enables websocket events via socket.io
     'view engine'    : 'ejs'          // The templating engine used to render views
});
```

## Listen to routes and use socket.io with `Wiretaps`

```
telegraph g wiretap Root index
```

Will generate a `wiretap` file to listen for routes and events at`/`. It looks like this:

```javascript

// Note : In this case, we pass an empty string for the resource name.
//        One could always just pass a function as well, defaulting 
//        to the root

App.Wiretap("", function(socket) {
     
     this.index = function(req, res) {
          // Take an action in traditional Express fashion:
          res.render("index");
     };
     
     // Add websocket events
     // Note : Telegraph instantiation options must have "websockets" 
     //        set to true
     socket.onSocketEvent = function(data) {
          // Do something websockety
     };
     
});

```

## Starting the Server:

```
telegraph start
```

*or* use [foreman](http://rubygems.org/gems/foreman)

```
foreman start
```

---

## Using Databases

By default, Telegraph uses loose wrappers around [Backbone](https://github.com/documentcloud/backbone) Models and 
Collections as a temporary datastore. `CouchDB` can be configured in the `/config/database.json` file:

```json
{
    "development" : {

        "adapter"      : "couch",
        "host"         : "hostname",
        "dbname"       : "database name",
        "port"         : port,

        "auth"         : {
            "username" : "username",
            "password" : "password"
        }
    } 
}
```

This will setup [cradle]("https://github.com/cloudhead/cradle") for the above settings at `App.db`. 

## Generators

Use `telegraph g [type]` or `telegraph g [type]`

```
telegraph g model Foobar
telegraph g wiretap Foobars route1 route2 route3
```

---

## Heroku Hosting:

Telegraph is already configured for Heroku Cedar Stack. After running a `telegraph init`, do the following:

```
heroku create --stack cedar
git push heroku master
```